### 1. è·¯ç”±è·³è½¬çš„replaceæ–¹æ³•

#### 1.1 è·¯ç”±è·³è½¬çš„replaceæ–¹æ³•

* 1.ä½œç”¨:**æ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼**
* 2.æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼š`push`å’Œ`replace`
  `push`æ˜¯è¿½åŠ å†å²è®°å½•
  `replace`æ˜¯æ›¿æ¢å½“å‰è®°å½•ï¼Œè·¯ç”±è·³è½¬æ—¶å€™é»˜è®¤ä¸º`push`æ–¹å¼
* 3.å¼€å¯`replace`æ¨¡å¼
  `<router-link :replace="true" ...>News</router-link>
  ç®€å†™<router-link replace ...>News</router-link>`
  æ€»ç»“ï¼šæµè§ˆè®°å½•æœ¬è´¨æ˜¯ä¸€ä¸ªæ ˆï¼Œé»˜è®¤`push`ï¼Œç‚¹å¼€æ–°é¡µé¢å°±ä¼šåœ¨æ ˆé¡¶è¿½åŠ ä¸€ä¸ªåœ°å€ï¼Œåé€€ï¼Œæ ˆé¡¶æŒ‡é’ˆå‘ä¸‹ç§»åŠ¨ï¼Œæ”¹ä¸º`replace`å°±æ˜¯ä¸è¿½åŠ ï¼Œè€Œå°†æ ˆé¡¶åœ°å€æ›¿æ¢

`src/pages/Home.vue`

```vue
<template>
  <div>
    <h2>Homeç»„ä»¶å†…å®¹</h2>
    <div>
      <ul class="nav nav-tabs">
        <li>
          <router-link replace class="list-group-item" active-class="active" 
                       to="/home/news">News</router-link>
    		</li>
        <li>
          <router-link replace class="list-group-item" active-class="active" 
                       to="/home/message">Message</router-link>
    		</li>
    </ul>
    <router-view></router-view>
    </div>
  </div>
</template>

<script>
  export default {
    name:'Home'
  }
</script>
```

### 2.ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª(ä¸ç”¨`<router-link>`)

> ä½œç”¨ï¼šä¸å€ŸåŠ©<router-link>å®ç°è·¯ç”±è·³è½¬ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»
> this.$router.`push({})`	å†…ä¼ çš„å¯¹è±¡ä¸`<router-link>`ä¸­çš„toç›¸åŒ
> this.$router.`replace({})`	
> this.$router.`forward()`	å‰è¿›
> this.$router.`back()`		åé€€
> this.$router.`go(n)`		å¯å‰è¿›ä¹Ÿå¯åé€€ï¼Œnä¸ºæ­£æ•°å‰è¿›nï¼Œä¸ºè´Ÿæ•°åé€€

```js
this.$router.push({
	name:'xiangqing',
  params:{
    id:xxx,
    title:xxx
  }
})

this.$router.replace({
	name:'xiangqing',
  params:{
    id:xxx,
    title:xxx
  }
})
```

`src/pages/Message.vue`

```vue
<template>
    <div>
        <ul>
            <li v-for="m in messageList" :key="m.id">
                <router-link :to="{
                    name:'xiangqing',
                    params:{
                        id:m.id,
                        title:m.title
                    }
                }">
                    {{m.title}}
                </router-link>
                <button @click="showPush(m)">pushæŸ¥çœ‹</button>
                <button @click="showReplace(m)">replaceæŸ¥çœ‹</button>
            </li>
        </ul>
        <hr/>
        <router-view></router-view>
    </div>
</template>

<script>
    export default {
        name:'News',
        data(){
            return{
                messageList:[
                    {id:'001',title:'æ¶ˆæ¯001'},
                    {id:'002',title:'æ¶ˆæ¯002'},
                    {id:'003',title:'æ¶ˆæ¯003'}
                ]
            }
        },
        methods:{
            showPush(m){
                this.$router.push({
                    name:'xiangqing',
                    query:{
                        id:m.id,
                        title:m.title
                    }
                })
            },
            showReplace(m){
                this.$router.replace({
                    name:'xiangqing',
                    query:{
                        id:m.id,
                        title:m.title
                    }
                })
            }
        }
    }
</script>
```

#### 3.ç¼“å­˜è·¯ç”±ç»„ä»¶

* ä½œç”¨:è®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½,ä¸è¢«é”€æ¯

`<keep-alive include="News"><router-view></router-view></keep-alive>
<keep-alive :include="['News', 'Message']"><router-view></router-view></keep-alive>`

```vue
// ç¼“å­˜ä¸€ä¸ªè·¯ç”±ç»„ä»¶
<keep-alive include="News"> // includeä¸­å†™æƒ³è¦ç¼“å­˜çš„ç»„ä»¶åï¼Œä¸å†™è¡¨ç¤ºå…¨éƒ¨ç¼“å­˜
    <router-view></router-view>
</keep-alive>

// ç¼“å­˜å¤šä¸ªè·¯ç”±ç»„ä»¶
<keep-alive :include="['News','Message']"> 
    <router-view></router-view>
</keep-alive>
```

![](https://cdn.nlark.com/yuque/0/2022/png/1379492/1644152767948-3e9e4103-b4b0-4261-ba33-a11006fc958e.png)

`src/pages/News.vue`

```vue
<template>
    <ul>
        <li>news001 <input type="text"></li>
        <li>news002 <input type="text"></li>
        <li>news003 <input type="text"></li>
    </ul>
</template>

<script>
    export default {
        name:'News'
    }
</script>
```

`src/pages/Home.vue`

```vue
<template>
  <div>
    <h2>Homeç»„ä»¶å†…å®¹</h2>
    <div>
      <ul class="nav nav-tabs">
        <li><router-link replace class="list-group-item" active-class="active" 
                       to="/home/news">News</router-link></li>
        <li><router-link replace class="list-group-item" active-class="active" 
                       to="/home/message">Message</router-link></li>
    	</ul>
      <keep-alive include="News">
        <router-view></router-view>
    	</keep-alive>
    </div>
  </div>
</template>

<script>
    export default {
        name:'Home'
    }
</script>
```

##  Vue Router activated deactivated è·¯ç”±å®ˆå«

#### 4. **activated deactivated** 

`activated`å’Œ`deactivated`æ˜¯è·¯ç”±ç»„ä»¶æ‰€ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­,ç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€

* å…·ä½“ä½¿ç”¨

     * 1.`acticated` :è·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘
     * 2.`deactivated`è·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘

![](https://cdn.nlark.com/yuque/0/2022/gif/1379492/1644153618338-66b6e803-45c2-4042-a0c7-ef19053a7bc6.gif)

`src/pages/News.vue`

```vue
<template>
    <ul>
        <li :style="{opacity}">æ¬¢è¿å­¦ä¹ vue</li>
        <li>news001 <input type="text"></li>
        <li>news002 <input type="text"></li>
        <li>news003 <input type="text"></li>
    </ul>
</template>

<script>
    export default {
        name:'News',
        data(){
            return{
                opacity:1
            }
        },
        activated(){
            console.log('Newsç»„ä»¶è¢«æ¿€æ´»äº†')
            this.timer = setInterval(() => {
                this.opacity -= 0.01
                if(this.opacity <= 0) this.opacity = 1
            },16)
        },
        deactivated(){
            console.log('Newsç»„ä»¶å¤±æ´»äº†')
            clearInterval(this.timer)
        }
    }
</script>
```

#### 4.1 è·¯ç”±å®ˆå«

* ä½œç”¨:å¯¹è·¯ç”±è¿›è¡Œæƒé™æ“ä½œ
* åˆ†ç±»:å…¨å±€å®ˆå«ã€ç‹¬äº«å®ˆå«ã€ç»„ä»¶å†…å®ˆå«

##### 1.å…¨å±€å®ˆå«

`meta`è·¯ç”±æºä¿¡æ¯

```js
// å…¨å±€å‰ç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢å‰æ‰§è¡Œ
router.beforeEach((to,from,next) => {
	console.log('beforeEach',to,from)
	if(to.meta.isAuth){ // åˆ¤æ–­å½“å‰è·¯ç”±æ˜¯å¦éœ€è¦è¿›è¡Œæƒé™æ§åˆ¶
		if(localStorage.getItem('school') === 'atguigu'){ // æƒé™æ§åˆ¶çš„å…·ä½“è§„åˆ™
			next()	// æ”¾è¡Œ
		}else{
			alert('æš‚æ— æƒé™æŸ¥çœ‹')
		}
	}else{
		next()	// æ”¾è¡Œ
	}
})

// å…¨å±€åç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢åæ‰§è¡Œ
router.afterEach((to,from) => {
	console.log('afterEach',to,from)
	if(to.meta.title){ 
		document.title = to.meta.title //ä¿®æ”¹ç½‘é¡µçš„title
	}else{
		document.title = 'vue_test'
	}
})
```

##### 2.ç‹¬äº«å®ˆå«

````js
beforeEnter(to,from,next){
	console.log('beforeEnter',to,from)
    if(localStorage.getItem('school') === 'atguigu'){
        next()
    }else{
        alert('æš‚æ— æƒé™æŸ¥çœ‹')
    }
}
````

##### 3.ç»„ä»¶å†…å®ˆå«

```vue
//è¿›å…¥å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
beforeRouteEnter (to, from, next) {... next()},

//ç¦»å¼€å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
beforeRouteLeave (to, from, next) {... next()},
```

#### 4.2 å…¨å±€è·¯ç”±å®ˆå«

`src/router/index.js`

```js
//è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨
import VueRouter from "vue-router";
//å¼•å…¥ç»„ä»¶
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'
import Detail from '../pages/Detail'


//åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨
const router = new VueRouter({
    routes:[
        {
            name:'guanyv',
            path:'/about',
            component:About,
            meta:{title:'å…³äº'}
        },
        {
            name:'zhuye',
            path:'/home',
            component:Home,
            meta:{title:'ä¸»é¡µ'},
            children:[
                {
                    name:'xinwen',
                    path:'news',
                    component:News,
                    meta:{isAuth:true,title:'æ–°é—»'}
                },
                {
                    name:'xiaoxi',
                    path:'message',
                    component:Message,
                    meta:{isAuth:true,title:'æ¶ˆæ¯'},
                    children:[
                        {
                            name:'xiangqing',
                            path:'detail',
                            component:Detail,
                            meta:{isAuth:true,title:'è¯¦æƒ…'},
                            props($route){
                                return {
                                    id:$route.query.id,
                                    title:$route.query.title,
                                }
														}
                        }
                    ]
                }
            ]
        }
    ]
})

// ğŸ”´å…¨å±€å‰ç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹å‰è¢«è°ƒç”¨
router.beforeEach((to,from,next) => {
    console.log('å‰ç½®è·¯ç”±å®ˆå«',to,from)
    if(to.meta.isAuth){
        if(localStorage.getItem('school')==='atguigu'){
            next()
        }else{
            alert('å­¦æ ¡åä¸å¯¹ï¼Œæ— æƒé™æŸ¥çœ‹ï¼')
        }
    }else{
        next()
    }
})

// ğŸ”´å…¨å±€åç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨
router.afterEach((to,from)=>{
	console.log('åç½®è·¯ç”±å®ˆå«',to,from)
	document.title = to.meta.title || 'ç¡…è°·ç³»ç»Ÿ'
})

// å¯¼å‡ºè·¯ç”±å™¨
export default router
```

#### 4.2.1 ç‹¬äº«è·¯ç”±å®ˆå«

`src/router/index.js`

```js
//è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨
import VueRouter from "vue-router";
//å¼•å…¥ç»„ä»¶
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'
import Detail from '../pages/Detail'


//åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨
const router = new VueRouter({
    routes:[
        {
            name:'guanyv',
            path:'/about',
            component:About,
            meta:{title:'å…³äº'}
        },
        {
            name:'zhuye',
            path:'/home',
            component:Home,
            meta:{title:'ä¸»é¡µ'},
            children:[
                {
                    name:'xinwen',
                    path:'news',
                    component:News,
                    meta:{title:'æ–°é—»'},
                    // ğŸ”´ç‹¬äº«å®ˆå«ï¼Œç‰¹å®šè·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨
                    beforeEnter(to,from,next){
                        console.log('ç‹¬äº«è·¯ç”±å®ˆå«',to,from)
                        if(localStorage.getItem('school') === 'atguigu'){
                            next()
                        }else{
                            alert('æš‚æ— æƒé™æŸ¥çœ‹')
                        }
                    }
                },
                {
                    name:'xiaoxi',
                    path:'message',
                    component:Message,
                    meta:{title:'æ¶ˆæ¯'},
                    children:[
                        {
                            name:'xiangqing',
                            path:'detail',
                            component:Detail,
                            meta:{title:'è¯¦æƒ…'},
                            props($route){
                                return {
                                    id:$route.query.id,
                                    title:$route.query.title,
                                }
                            }
                        }
                    ]
                }
            ]
        }
    ]
})

//å…¨å±€åç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨
router.afterEach((to,from)=>{
	console.log('åç½®è·¯ç”±å®ˆå«',to,from)
	document.title = to.meta.title || 'ç¡…è°·ç³»ç»Ÿ'
})

//å¯¼å‡ºè·¯ç”±å™¨
export default router
```

#### 4.2.2 ç»„ä»¶å†…è·¯ç”±å®ˆå«

`src/pages/About.vue`

```vue
<template>
    <h2>æˆ‘æ˜¯Aboutç»„ä»¶çš„å†…å®¹</h2>
</template>

<script>
    export default {
        name:'About',
        // é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
        beforeRouteEnter (to, from, next) {
            console.log('About--beforeRouteEnter',to,from)
            if(localStorage.getItem('school')==='atguigu'){
                next()
            }else{
                alert('å­¦æ ¡åä¸å¯¹ï¼Œæ— æƒé™æŸ¥çœ‹ï¼')
            }
        },
        // é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
        beforeRouteLeave (to, from, next) {
            console.log('About--beforeRouteLeave',to,from)
            next()
        }
    }
</script>
```

#### 5.è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼

* 1.å¯¹äºä¸€ä¸ª`url`æ¥è¯´,ä»€ä¹ˆæ˜¯`hash`å€¼?

* **åŠå…¶åé¢çš„å†…å®¹å°±æ˜¯`hash`å€¼**

* 2.`hashå€¼`ä¸ä¼šåŒ…å«åœ¨`HTTP`è¯·æ±‚ä¸­,å³:`hashå€¼`ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨

* 3.**hash**æ¨¡å¼
  
  * a.åœ°å€ä¸­æ°¸è¿œå¸¦ç€#å·,ä¸ç¾è§‚
  * b.è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœºappåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•
  * c.å…¼å®¹æ€§è¾ƒå¥½
  
* 4.**history**æ¨¡å¼
  * a.åœ°å€å¹²å‡€,ç¾è§‚
  * b.å…¼å®¹æ€§å’Œ`hash`æ¨¡å¼ç›¸æ¯”ç•¥å·®
  * c.åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜æ”¯æŒï¼Œè§£å†³åˆ·æ–°é¡µé¢æœåŠ¡ç«¯404çš„é—®é¢˜
  
  ```js
  const router =  new VueRouter({
  	mode:'history',
  	routes:[...]
  })
  
  export default router
  ```
  
  ## Vue UIç»„ä»¶åº“
  
  #### 7.1 å¸¸ç”¨UIç»„ä»¶åº“
  
  ##### 7.1.1 ç§»åŠ¨ç«¯å¸¸ç”¨UIç»„ä»¶åº“
  
  > 1.[Vant](https://youzan.github.io/vant)
  >2.[Cube UI](https://didi.github.io/cube-ui)
  > 3.[Mint UI](http://mint-ui.github.io/)
  >4.https://nutui.jd.com/#/
  
  ##### 7.1.2. PCç«¯å¸¸ç”¨UIç»„ä»¶åº“
  > * 1.[Element UI](https://element.eleme.cn/)
  > * 2[.IView UI](https://www.iviewui.com/)

##### 7.2. element-uiåŸºæœ¬ä½¿ç”¨

* 1.å®‰è£… element-uiï¼šnpm i element-ui -S 

  `src/main.js`

```js
import Vue from 'vue'
import App from './App.vue'
import ElementUI from 'element-ui';							// å¼•å…¥ElementUIç»„ä»¶åº“
import 'element-ui/lib/theme-chalk/index.css';	// å¼•å…¥ElementUIå…¨éƒ¨æ ·å¼

Vue.config.productionTip = false

Vue.use(ElementUI)	// ä½¿ç”¨ElementUI

new Vue({
    el:"#app",
    render: h => h(App),
})
```

`src/App.vue`

```vue
<template>
	<div>
		<br>
		<el-row>
			<el-button icon="el-icon-search" circle></el-button>
			<el-button type="primary" icon="el-icon-edit" circle></el-button>
			<el-button type="success" icon="el-icon-check" circle></el-button>
			<el-button type="info" icon="el-icon-message" circle></el-button>
			<el-button type="warning" icon="el-icon-star-off" circle></el-button>
			<el-button type="danger" icon="el-icon-delete" circle></el-button>
		</el-row>
	</div>
</template>

<script>
	export default {
		name:'App',
	}
</script>
```

#### 7.3. element-uiæŒ‰éœ€å¼•å…¥

* 1.å®‰è£… babel-plugin-componentnpm i babel-plugin-component -D 

  `ä¿®æ”¹ babel-config-js`

```js
module.exports = {
  presets: [
    '@vue/cli-plugin-babel/preset',
    ["@babel/preset-env", { "modules": false }]
  ],
  plugins: [
    [
      "component",
      {        
        "libraryName": "element-ui",
        "styleLibraryName": "theme-chalk"
      }
    ]
  ]
}
```

`src/main.js:  `

```js
import Vue from 'vue'
import App from './App.vue'
import { Button,Row } from 'element-ui'	// æŒ‰éœ€å¼•å…¥

Vue.config.productionTip = false

Vue.component(Button.name, Button);
Vue.component(Row.name, Row);
/* æˆ–å†™ä¸º
 * Vue.use(Button)
 * Vue.use(Row)
 */

new Vue({
    el:"#app",
    render: h => h(App),
})
```

